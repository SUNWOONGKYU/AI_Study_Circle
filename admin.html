<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì â€” AI Study 110</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=Noto+Sans+KR:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* ë©¤ë²„ í…Œì´ë¸” ì¹¼ëŸ¼ ë„ˆë¹„ ì¡°ì • */
        #members-table th:nth-child(1),
        #members-table td:nth-child(1) { width: 60px; min-width: 60px; } /* ì´ë¦„ */

        #members-table th:nth-child(2),
        #members-table td:nth-child(2) { width: 90px; min-width: 90px; } /* ì „í™”ë²ˆí˜¸ */

        #members-table th:nth-child(3),
        #members-table td:nth-child(3) { width: 140px; min-width: 140px; } /* ì´ë©”ì¼ */

        #members-table th:nth-child(4),
        #members-table td:nth-child(4) { width: 250px; min-width: 250px; } /* í˜„ì¬ í•˜ëŠ” ì¼ */

        #members-table th:nth-child(5),
        #members-table td:nth-child(5) { width: 250px; min-width: 250px; } /* ê´€ì‹¬ ë¶„ì•¼ */

        #members-table th:nth-child(6),
        #members-table td:nth-child(6) { width: 80px; min-width: 80px; } /* ìœ í˜• */

        #members-table th:nth-child(7),
        #members-table td:nth-child(7) { width: 85px; min-width: 85px; } /* ê°€ì…ì¼ */

        #members-table th:nth-child(8),
        #members-table td:nth-child(8) { width: 60px; min-width: 60px; } /* ê´€ë¦¬ */

        #members-table td {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* í˜„ì¬ í•˜ëŠ” ì¼, ê´€ì‹¬ ë¶„ì•¼ëŠ” ì¤„ë°”ê¿ˆ í—ˆìš© */
        #members-table td:nth-child(4),
        #members-table td:nth-child(5) {
            white-space: normal;
            word-break: break-word;
        }
    </style>
</head>
<body>
    <!-- Background Effects -->
    <div class="bg-grid"></div>
    <div class="bg-orb bg-orb-1"></div>
    <div class="bg-orb bg-orb-2"></div>
    <div class="bg-orb bg-orb-3"></div>

    <!-- Navigation -->
    <nav>
        <div class="nav-inner">
            <div class="nav-logo">
                <a href="index.html" style="text-decoration:none; display:flex; align-items:center; gap:0.5rem;">
                    <span class="ai">AI</span>
                    <span class="sc">Study</span>
                    <span class="brand-num">110</span>
                </a>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">ë©”ì¸ ì‚¬ì´íŠ¸</a></li>
                <li id="nav-user-menu" class="nav-user-menu">
                    <button class="nav-user-btn" id="nav-user-btn">
                        <span id="nav-user-name">ê´€ë¦¬ì</span> â–¼
                    </button>
                    <div class="nav-dropdown" id="nav-dropdown">
                        <a href="index.html#membership" class="dropdown-item">ë‚´ í”„ë¡œí•„</a>
                        <button class="dropdown-item" id="admin-logout-btn">ë¡œê·¸ì•„ì›ƒ</button>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <div class="admin-container">
        <!-- ë¡œë”© / ê¶Œí•œ ì—†ìŒ -->
        <div id="admin-loading" class="admin-loading">ê´€ë¦¬ì ê¶Œí•œ í™•ì¸ ì¤‘...</div>
        <div id="admin-denied" style="display:none;" class="admin-empty">
            <h2>ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤</h2>
            <p>ê´€ë¦¬ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤.</p>
            <a href="index.html" class="btn-primary" style="margin-top:1rem; display:inline-flex;">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸° â†’</a>
        </div>

        <!-- ê´€ë¦¬ì ì½˜í…ì¸  -->
        <div id="admin-content" style="display:none;">
            <div class="admin-header">
                <h1>ê´€ë¦¬ì í˜ì´ì§€</h1>
                <p>ë©¤ë²„ ê´€ë¦¬ì™€ ëª¨ì„ ê´€ë¦¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            </div>

            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="members">ë©¤ë²„ ê´€ë¦¬</button>
                <button class="admin-tab" data-tab="events">ëª¨ì„ ê´€ë¦¬</button>
                <button class="admin-tab" data-tab="locations">ì¥ì†Œ ê´€ë¦¬</button>
                <button class="admin-tab" data-tab="inquiries">ë¬¸ì˜ ê´€ë¦¬</button>
            </div>

            <!-- ë©¤ë²„ ê´€ë¦¬ -->
            <div id="panel-members" class="admin-panel active">
                <div class="admin-card">
                    <h3>ì „ì²´ ë©¤ë²„ ëª©ë¡</h3>
                    <div class="admin-actions">
                        <input type="text" class="admin-search" id="member-search" placeholder="ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰...">
                        <button class="btn-secondary btn-small" onclick="exportMembersExcel()" title="Excel íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œ">ğŸ“¥ Excel ë‹¤ìš´ë¡œë“œ</button>
                        <button class="btn-secondary btn-small" onclick="exportMembersCsv()" title="CSV íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œ">ğŸ“¥ CSV ë‹¤ìš´ë¡œë“œ</button>
                    </div>
                    <div class="admin-table-wrap">
                        <table class="admin-table" id="members-table">
                            <thead>
                                <tr>
                                    <th>ì´ë¦„</th>
                                    <th>ì „í™”ë²ˆí˜¸</th>
                                    <th>ì´ë©”ì¼</th>
                                    <th>í˜„ì¬ í•˜ëŠ” ì¼</th>
                                    <th>ê´€ì‹¬ë¶„ì•¼</th>
                                    <th>ìœ í˜•</th>
                                    <th>ê°€ì…ì¼</th>
                                    <th>ê´€ë¦¬</th>
                                </tr>
                            </thead>
                            <tbody id="members-tbody">
                                <tr><td colspan="8" class="admin-loading">ë¡œë”© ì¤‘...</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <p id="member-count" style="margin-top:1rem; color:var(--text-muted); font-size:0.85rem;"></p>
                </div>
            </div>

            <!-- ëª¨ì„ ê´€ë¦¬ -->
            <div id="panel-events" class="admin-panel">
                <div class="admin-horizontal">
                <!-- ëª¨ì„ ë“±ë¡ -->
                <div class="admin-card event-form-card">
                    <h3 id="event-form-title">ìƒˆ ëª¨ì„ ë“±ë¡</h3>
                    <form id="event-form" class="site-form">
                        <input type="hidden" id="edit-event-id" value="">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="ev-title">ëª¨ì„ ì œëª© <span class="required">*</span></label>
                                <input type="text" id="ev-title" required placeholder="2ì°¨ ì •ê¸° ëª¨ì„">
                            </div>
                            <div class="form-group">
                                <label for="ev-date">ë‚ ì§œ <span class="required">*</span></label>
                                <input type="date" id="ev-date" required>
                            </div>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="ev-time">ì‹œê°„</label>
                                <input type="time" id="ev-time" value="19:00">
                            </div>
                            <div class="form-group">
                                <label for="ev-day-label">ìš”ì¼ í‘œì‹œ</label>
                                <select id="ev-day-label">
                                    <option value="">ìë™ ê³„ì‚°</option>
                                    <option value="MON">ì›”ìš”ì¼ (MON)</option>
                                    <option value="TUE">í™”ìš”ì¼ (TUE)</option>
                                    <option value="WED">ìˆ˜ìš”ì¼ (WED)</option>
                                    <option value="THU">ëª©ìš”ì¼ (THU)</option>
                                    <option value="FRI">ê¸ˆìš”ì¼ (FRI)</option>
                                    <option value="SAT">í† ìš”ì¼ (SAT)</option>
                                    <option value="SUN">ì¼ìš”ì¼ (SUN)</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="ev-location-select">ì¥ì†Œ ì„ íƒ</label>
                                <select id="ev-location-select">
                                    <option value="">-- ì¥ì†Œë¥¼ ì„ íƒí•˜ì„¸ìš” --</option>
                                </select>
                            </div>
                        </div>
                        <input type="hidden" id="ev-location" value="">
                        <input type="hidden" id="ev-address" value="">
                        <input type="hidden" id="ev-map-url" value="">
                        <div class="form-group">
                            <label for="ev-provision">ì œê³µ ì‚¬í•­</label>
                            <input type="text" id="ev-provision" placeholder="ê°„ë‹¨í•œ ìƒŒë“œìœ„ì¹˜ & ìŒë£Œ">
                        </div>
                        <div class="form-group">
                            <label for="ev-desc">ì„¤ëª…</label>
                            <textarea id="ev-desc" rows="3" placeholder="ëª¨ì„ ë‚´ìš©, ì¤€ë¹„ë¬¼ ë“±"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="ev-youtube">ìœ íŠœë¸Œ ë¼ì´ë¸Œ URL</label>
                            <input type="url" id="ev-youtube" placeholder="https://youtube.com/live/...">
                        </div>
                        <div style="display:flex; gap:0.5rem;">
                            <button type="submit" class="btn-primary form-submit">ëª¨ì„ ë“±ë¡ â†’</button>
                            <button type="button" class="btn-secondary" id="event-form-reset" style="display:none;">ì·¨ì†Œ</button>
                        </div>
                        <div class="form-status" id="event-form-status"></div>
                    </form>
                </div>

                <!-- ëª¨ì„ ëª©ë¡ + ì°¸ì—¬ì ëª…ë‹¨ -->
                <div>
                    <div class="admin-card">
                        <h3>ëª¨ì„ ëª©ë¡</h3>
                        <div class="admin-table-wrap">
                            <table class="admin-table" id="events-table">
                                <thead>
                                    <tr>
                                        <th>ì œëª©</th>
                                        <th>ë‚ ì§œ</th>
                                        <th>ì‹œê°„</th>
                                        <th>ì¥ì†Œ</th>
                                        <th>ìƒíƒœ</th>
                                        <th>ì°¸ì—¬ì</th>
                                        <th>ê´€ë¦¬</th>
                                    </tr>
                                </thead>
                                <tbody id="events-tbody">
                                    <tr><td colspan="7" class="admin-loading">ë¡œë”© ì¤‘...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ì°¸ì—¬ì ëª…ë‹¨ (ë™ì ) -->
                    <div class="admin-card" id="attendees-card" style="display:none;">
                        <h3 id="attendees-title">ì°¸ì—¬ì ëª…ë‹¨</h3>
                        <div class="admin-table-wrap">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>ì´ë¦„</th>
                                        <th>ì „í™”ë²ˆí˜¸</th>
                                        <th>ì´ë©”ì¼</th>
                                        <th>ë©”ëª¨</th>
                                        <th>ì‹ ì²­ì¼</th>
                                        <th>ì‚­ì œ</th>
                                    </tr>
                                </thead>
                                <tbody id="attendees-tbody"></tbody>
                            </table>
                        </div>
                        <p id="attendees-count" style="margin-top:1rem; color:var(--text-muted); font-size:0.85rem;"></p>
                    </div>
                </div>

                </div><!-- /admin-horizontal -->
            </div>
            <!-- ì¥ì†Œ ê´€ë¦¬ -->
            <div id="panel-locations" class="admin-panel">
                <div class="admin-horizontal">
                <!-- ì¥ì†Œ ë“±ë¡/ìˆ˜ì • -->
                <div class="admin-card event-form-card">
                    <h3 id="loc-form-title">ìƒˆ ì¥ì†Œ ë“±ë¡</h3>
                    <form id="loc-form" class="site-form">
                        <input type="hidden" id="edit-loc-id" value="">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loc-name">ì¥ì†Œ ì´ë¦„ <span class="required">*</span></label>
                                <input type="text" id="loc-name" required placeholder="ì˜ë¡œí€ì¹˜ ì„±ìˆ˜ë©”ì‚¬">
                            </div>
                            <div class="form-group">
                                <label for="loc-type">ì¥ì†Œ ìœ í˜•</label>
                                <select id="loc-type">
                                    <option value="primary">ë©”ì¸ ì¥ì†Œ</option>
                                    <option value="secondary">ë³´ì¡° ì¥ì†Œ</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="loc-address">ì£¼ì†Œ</label>
                                <input type="text" id="loc-address" placeholder="ì„±ìˆ˜ì¼ë¡œ 8ê¸¸ 5 Aë™ 607í˜¸">
                            </div>
                            <div class="form-group">
                                <label for="loc-map-url">ì§€ë„ ë§í¬</label>
                                <input type="url" id="loc-map-url" placeholder="https://naver.me/...">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="loc-note">ì„¤ëª…/ë¹„ê³ </label>
                            <textarea id="loc-note" rows="2" placeholder="ì¥ì†Œ íŠ¹ì§•, ì°¸ê³  ì‚¬í•­ ë“±"></textarea>
                        </div>
                        <div style="display:flex; gap:0.5rem;">
                            <button type="submit" class="btn-primary form-submit">ì¥ì†Œ ë“±ë¡ â†’</button>
                            <button type="button" class="btn-secondary" id="loc-form-reset" style="display:none;">ì·¨ì†Œ</button>
                        </div>
                        <div class="form-status" id="loc-form-status"></div>
                    </form>
                </div>

                <!-- ì¥ì†Œ ëª©ë¡ -->
                <div class="admin-card">
                    <h3>ì¥ì†Œ ëª©ë¡</h3>
                    <div class="admin-table-wrap">
                        <table class="admin-table" id="locations-table">
                            <thead>
                                <tr>
                                    <th>ì´ë¦„</th>
                                    <th>ì£¼ì†Œ</th>
                                    <th>ìœ í˜•</th>
                                    <th>ìƒíƒœ</th>
                                    <th>ê´€ë¦¬</th>
                                </tr>
                            </thead>
                            <tbody id="locations-tbody">
                                <tr><td colspan="5" class="admin-loading">ë¡œë”© ì¤‘...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                </div><!-- /admin-horizontal -->
            </div>

            <!-- ë¬¸ì˜ ê´€ë¦¬ -->
            <div id="panel-inquiries" class="admin-panel">
                <div class="admin-card">
                    <h3>ë¬¸ì˜ ëª©ë¡</h3>
                    <p id="inquiry-count" style="margin-bottom:1rem; color:var(--text-muted); font-size:0.85rem;"></p>
                    <div class="admin-table-wrap">
                        <table class="admin-table" id="inquiries-table">
                            <thead>
                                <tr>
                                    <th>ì´ë¦„</th>
                                    <th>ì „í™”ë²ˆí˜¸</th>
                                    <th>ì´ë©”ì¼</th>
                                    <th>ì œëª©</th>
                                    <th>ë‚´ìš©</th>
                                    <th>ì ‘ìˆ˜ì¼</th>
                                    <th>ê´€ë¦¬</th>
                                </tr>
                            </thead>
                            <tbody id="inquiries-tbody">
                                <tr><td colspan="7" class="admin-loading">ë¡œë”© ì¤‘...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ë¬¸ì˜ ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
    <div class="inquiry-detail-modal" id="inquiry-detail-modal">
        <div class="inquiry-detail-content">
            <button class="inquiry-detail-close" id="inquiry-detail-close">&times;</button>
            <h3>ë¬¸ì˜ ìƒì„¸</h3>
            <div class="inquiry-detail-grid">
                <div class="inquiry-detail-item">
                    <span class="inquiry-detail-label">ì´ë¦„</span>
                    <span class="inquiry-detail-value" id="inq-detail-name">-</span>
                </div>
                <div class="inquiry-detail-item">
                    <span class="inquiry-detail-label">ì „í™”ë²ˆí˜¸</span>
                    <span class="inquiry-detail-value" id="inq-detail-phone">-</span>
                </div>
                <div class="inquiry-detail-item">
                    <span class="inquiry-detail-label">ì´ë©”ì¼</span>
                    <span class="inquiry-detail-value" id="inq-detail-email">-</span>
                </div>
                <div class="inquiry-detail-item">
                    <span class="inquiry-detail-label">ì ‘ìˆ˜ì¼</span>
                    <span class="inquiry-detail-value" id="inq-detail-date">-</span>
                </div>
            </div>
            <div class="inquiry-detail-item" style="margin-top:1rem;">
                <span class="inquiry-detail-label">ì œëª©</span>
                <span class="inquiry-detail-value" id="inq-detail-subject">-</span>
            </div>
            <div class="inquiry-detail-item" style="margin-top:1rem;">
                <span class="inquiry-detail-label">ë‚´ìš©</span>
                <div class="inquiry-detail-message" id="inq-detail-message">-</div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-inner">
            <p class="footer-privacy"><a href="privacy.html" style="color: var(--text-muted); text-decoration: none; font-size: 0.85rem;">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a></p>
            <div class="footer-logo">
                <span class="ai">AI</span> Study <span class="brand-num">110</span>
            </div>
            <p class="footer-text"><strong>ììœ¨ê³¼ ì°½ì˜ì„± ì•ˆì—ì„œ ì¦ê²ê²Œ â€” ë¦¬ì•¤ì»´í¼ë‹ˆ ì´ë¯¸ê²½</strong></p>
            <p class="footer-since"><strong>Since 2026. 1. 10</strong></p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"></script>
    <script src="js/supabase-config.js?v=20260204b"></script>
    <script src="js/admin.js?v=20260205a"></script>
</body>
</html>
